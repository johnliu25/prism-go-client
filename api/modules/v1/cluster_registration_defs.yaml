definitions:
  k8s_identity:
    description: "K8s cluster identity in Prism."
    type: object
    required:
    - uuid
    - kind
    properties:
     uuid:
      type: string
     name:
      type: string
      minLength: 1
      maxLength: 1024
     kind:
      type: string
      enum: ["user"]

  k8s_create_cluster_registration_request:
    type: object
    required:
    - metadata
    - name
    properties:
      metadata:
        $ref: "#/definitions/metadata"
      name:
        description: "Unique name of the k8s cluster."
        type: string
        pattern: "[a-z0-9]([-a-z0-9]*[a-z0-9])?"
        example: prod-cluster
        minLength: 1
        maxLength: 40
      uuid:
        description: The universally unique identifier (UUID) of the k8s cluster.
        type: string
        pattern: ^[a-fA-F0-9]{8}-[a-fA-F0-9]{4}-[a-fA-F0-9]{4}-[a-fA-F0-9]{4}-[a-fA-F0-9]{12}$
      categories_mapping:
        description: Categories for this k8s cluster. This allows setting up multiple values from a single key.
        type: object
        additionalProperties:
          type: string
      identity:
        $ref: "#/definitions/k8s_identity"

  k8s_create_cluster_registration_response:
    type: object
    required:
    - task_uuid
    - cluster_name
    - cluster_uuid
    properties:
      task_uuid:
        type: string
      cluster_name:
        type: string
      cluster_uuid:
        type: string
  
  # K8s cluster list response.
  k8s_cluster_registration_list:
    type: array
    description: "K8s cluster registrations list response."
    items:
      $ref: "#/definitions/k8s_cluster_registration"

  # Cluster get response.
  k8s_cluster_registration:
    type: object
    description: "K8s cluster registration details."
    required:
    - name
    properties:
      name:
        description: K8s cluster name.
        type: string
        minLength: 1
        maxLength: 40
      uuid:
        description: The universally unique identifier (UUID) of the k8s cluster.
        type: string
        pattern: ^[a-fA-F0-9]{8}-[a-fA-F0-9]{4}-[a-fA-F0-9]{4}-[a-fA-F0-9]{4}-[a-fA-F0-9]{12}$
      categories_mapping:
        description: Categories for this k8s cluster. This allows setting up multiple values from a single key.
        type: object
        additionalProperties:
          type: string
      identity:
        $ref: "#/definitions/k8s_identity"
      status:
        type: string
        description: K8s cluster status.

  k8s_cluster_registration_delete_response:
    type: object
    required:
    - task_uuid
    properties:
      task_uuid:
        type: string
        description: "UUID of the task tracking the k8s cluster deletion."
      cluster_uuid:
        type: string
        description: "UUID of the k8s cluster being deleted."
      cluster_name:
        type: string
        description: "Name of the k8s cluster being deleted."